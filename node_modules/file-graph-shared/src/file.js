const $ = require('jquery');

class File {
    constructor(path, name, tags = []) {
        this.path = path;
        this.name = name;
        this.tags = tags;
    }

    getId() {
        return this.path + '/' + this.name;
    }

    save() {
        return new Promise((res, rej) => {
            $.ajax({
                type: 'POST',
                url: `/file?file=${JSON.stringify(this)}`,
                dataType: 'json',
                success: () => res(this),
                contentType: 'application/json'
            });
        });
    }

    static fromJSON(json) {
        return new File(json.path, json.name, json.tags);
    }
}

module.exports = File;